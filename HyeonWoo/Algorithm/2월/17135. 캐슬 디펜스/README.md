# [Gold III] 캐슬 디펜스 - 17135 

[문제 링크](https://www.acmicpc.net/problem/17135) 

### 성능 요약

메모리: 63680 KB, 시간: 500 ms

### 분류

구현, 그래프 이론, 브루트포스 알고리즘, 그래프 탐색, 너비 우선 탐색, 시뮬레이션

### 문제 설명

캐슬 디펜스는 성을 향해 몰려오는 적을 잡는 턴 방식의 게임이다. 게임이 진행되는 곳은 크기가 N×M인 격자판으로 나타낼 수 있다. 격자판은 1×1 크기의 칸으로 나누어져 있고, 각 칸에 포함된 적의 수는 최대 하나이다. 격자판의 N번행의 바로 아래(N+1번 행)의 모든 칸에는 성이 있다.

성을 적에게서 지키기 위해 궁수 3명을 배치하려고 한다. 궁수는 성이 있는 칸에 배치할 수 있고, 하나의 칸에는 최대 1명의 궁수만 있을 수 있다. 각각의 턴마다 궁수는 적 하나를 공격할 수 있고, 모든 궁수는 동시에 공격한다. 궁수가 공격하는 적은 거리가 D이하인 적 중에서 가장 가까운 적이고, 그러한 적이 여럿일 경우에는 가장 왼쪽에 있는 적을 공격한다. 같은 적이 여러 궁수에게 공격당할 수 있다. 공격받은 적은 게임에서 제외된다. 궁수의 공격이 끝나면, 적이 이동한다. 적은 아래로 한 칸 이동하며, 성이 있는 칸으로 이동한 경우에는 게임에서 제외된다. 모든 적이 격자판에서 제외되면 게임이 끝난다. 

게임 설명에서 보다시피 궁수를 배치한 이후의 게임 진행은 정해져있다. 따라서, 이 게임은 궁수의 위치가 중요하다. 격자판의 상태가 주어졌을 때, 궁수의 공격으로 제거할 수 있는 적의 최대 수를 계산해보자.

격자판의 두 위치 (r1, c1), (r2, c2)의 거리는 |r1-r2| + |c1-c2|이다.

### 입력 

첫째 줄에 격자판 행의 수 N, 열의 수 M, 궁수의 공격 거리 제한 D가 주어진다. 둘째 줄부터 N개의 줄에는 격자판의 상태가 주어진다. 0은 빈 칸, 1은 적이 있는 칸이다.

### 출력 

첫째 줄에 궁수의 공격으로 제거할 수 있는 적의 최대 수를 출력한다.

### 제한

- 3 ≤ N, M ≤ 15
- 1 ≤ D ≤ 10
 
### 풀이

조건을 잘 확인하고 시뮬레이션으로 해결할 수 있는 문제이다.

고려 조건
- 궁수는 3명을 배치해야 한다.
- 궁수는 한턴에 한번씩 동시에 쏜다.
- 각 궁수는 쏠 수 있는 거리내에 있는 적 중 가장 가까운 적, 그런 적이 많다면 가장 왼쪽에 있는 적을 쏜다.
- 단 여러 명의 궁수가 조건만 충족한다면 같은 적을 쏠 수 있다.
- 적이 아래로 이동하다가 성, 즉 격자판의 범위를 벗어난다면 적이 없어진다.

풀이 과정
1. 적의 좌표를 저장하고 해당 리스트를 y좌표값 기준으로 오름차순 정렬한다. 가장 왼쪽에 있는 적부터 쏘기 위해 정렬
2. 백트래킹으로 모든 궁수 위치의 경우를 구한다.
3. 궁수를 배치했다면 적을 쏘고 움직이는 함수를 적이 없을 때까지 반복 호출한다.
4. 적을 쏠 경우 궁수를 순회하며 가장 가까운 적을 쏜다. 이때 1번 에서 왼쪽의 적부터 정렬했기 때문에 반드시 가장 왼쪽 적을 쏘게 된다.
5. 적을 움직일 경우 아래로 한칸씩 이동한다.
